<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.gwasil_zero.mapper.CommonMapper">
	
	<!-- 리스트 -->
	<select id="selectBoardList" parameterType="hashmap" resultType="com.project.gwasil_zero.model.Board">
		SELECT T.*, M.CATEGORY_NAME AS CATEGORY
		FROM (
		    SELECT B.BOARD_NO,B.BOARD_TITLE, B.CONTENTS, COUNT(C.CMT_NO)AS CMT_COUNT
		    FROM BOARD B
		    LEFT JOIN BOARD_CMT C ON B.BOARD_NO = C.BOARD_NO
		    GROUP BY B.BOARD_NO, B.BOARD_TITLE, B.CONTENTS, B.CDATE
		    ORDER BY B.CDATE DESC
		    OFFSET 0 ROWS FETCH NEXT 4 ROWS ONLY
		)T
		LEFT JOIN CATEGORIES CT ON T.BOARD_NO = CT.BOARD_NO
        INNER JOIN CATEGORIES_MASTER M ON CT.CATEGORY = M.CATEGORY_NO
	</select>


</mapper>




